"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/latest-data-date";
exports.ids = ["pages/api/latest-data-date"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "papaparse":
/*!****************************!*\
  !*** external "papaparse" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("papaparse");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Flatest-data-date&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Flatest-data-date.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Flatest-data-date&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Flatest-data-date.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_latest_data_date_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/latest-data-date.js */ \"(api)/./pages/api/latest-data-date.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_latest_data_date_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_latest_data_date_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/latest-data-date\",\n        pathname: \"/api/latest-data-date\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_latest_data_date_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmxhdGVzdC1kYXRhLWRhdGUmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmxhdGVzdC1kYXRhLWRhdGUuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDNEQ7QUFDNUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDJEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywyREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb2ktdXBsb2FkLXN5c3RlbS8/NjJiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2xhdGVzdC1kYXRhLWRhdGUuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9sYXRlc3QtZGF0YS1kYXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbGF0ZXN0LWRhdGEtZGF0ZVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Flatest-data-date&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Flatest-data-date.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TABLE_NAMES: () => (/* binding */ TABLE_NAMES),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   uploadCSVToSupabase: () => (/* binding */ uploadCSVToSupabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst supabaseUrl = \"https://nbclorobfotxrpbmyapi.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5iY2xvcm9iZm90eHJwYm15YXBpIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MTc5NTczMiwiZXhwIjoyMDc3MzcxNzMyfQ.xXIzeKJFq5qFfQYcuY-OMAixpM7mph4hTzFnbcX2btg\";\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\nconst TABLE_NAMES = {\n    meta: \"meta_import_data\",\n    google: \"google_import_data\",\n    shopify: \"shopify_import_data\"\n};\nasync function uploadCSVToSupabase(platform, file) {\n    try {\n        const text = await file.text();\n        const Papa = (await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! papaparse */ \"papaparse\", 23))).default;\n        const { data: rows, errors } = Papa.parse(text, {\n            header: true,\n            skipEmptyLines: true,\n            transformHeader: (header)=>header.trim()\n        });\n        if (errors.length > 0) {\n            return {\n                success: false,\n                message: `CSV parsing failed: ${errors[0].message}`,\n                insertedCount: 0\n            };\n        }\n        const tableName = TABLE_NAMES[platform];\n        // Transform rows for database insertion\n        const transformedRows = rows.map((row)=>{\n            const transformed = {};\n            // Platform-specific transformations - Map to EXACT database column names\n            if (platform === \"google\") {\n                transformed.Day = row.Day;\n                transformed.Campaign = row.Campaign;\n                transformed[\"Currency code\"] = row[\"Currency code\"] || \"INR\";\n                transformed.Cost = parseFloat(row.Cost) || 0;\n                transformed[\"Avg. CPM\"] = parseFloat(row[\"Avg. CPM\"]) || 0;\n                transformed.CTR = parseFloat(row.CTR?.replace(\"%\", \"\")) || 0;\n            } else if (platform === \"meta\") {\n                transformed[\"Campaign name\"] = row[\"Campaign name\"];\n                transformed[\"Ad set name\"] = row[\"Ad set name\"];\n                transformed[\"Ad name\"] = row[\"Ad name\"];\n                transformed.Day = row.Day;\n                transformed[\"Amount spent (INR)\"] = parseFloat(row[\"Amount spent (INR)\"]) || 0;\n                transformed[\"CPM (cost per 1,000 impressions)\"] = parseFloat(row[\"CPM (cost per 1,000 impressions)\"]) || 0;\n                transformed[\"CTR (link click-through rate)\"] = parseFloat(row[\"CTR (link click-through rate)\"]?.replace(\"%\", \"\")) || 0;\n            } else if (platform === \"shopify\") {\n                transformed.Day = row.Day;\n                transformed[\"UTM campaign\"] = row[\"UTM campaign\"];\n                transformed[\"UTM term\"] = row[\"UTM term\"];\n                transformed[\"UTM content\"] = row[\"UTM content\"];\n                transformed[\"Landing page URL\"] = row[\"Landing page URL\"];\n                transformed[\"Online store visitors\"] = parseInt(row[\"Online store visitors\"]) || 0;\n                transformed[\"Sessions that completed checkout\"] = parseInt(row[\"Sessions that completed checkout\"]) || 0;\n                transformed[\"Sessions that reached checkout\"] = parseInt(row[\"Sessions that reached checkout\"]) || 0;\n                transformed[\"Sessions with cart additions\"] = parseInt(row[\"Sessions with cart additions\"]) || 0;\n                transformed[\"Average session duration\"] = parseFloat(row[\"Average session duration\"]) || 0;\n                transformed.Pageviews = parseInt(row.Pageviews) || 0;\n            }\n            return transformed;\n        });\n        // Insert data in batches\n        const BATCH_SIZE = 500;\n        let insertedCount = 0;\n        for(let i = 0; i < transformedRows.length; i += BATCH_SIZE){\n            const batch = transformedRows.slice(i, i + BATCH_SIZE);\n            const { data, error } = await supabase.from(tableName).insert(batch).select();\n            if (error) {\n                console.error(`Batch insert error:`, error);\n                return {\n                    success: false,\n                    message: `Database insert failed: ${error.message}`,\n                    insertedCount\n                };\n            }\n            insertedCount += batch.length;\n        }\n        return {\n            success: true,\n            message: `Successfully uploaded ${insertedCount} rows`,\n            insertedCount,\n            data: transformedRows\n        };\n    } catch (error) {\n        console.error(\"Upload error:\", error);\n        return {\n            success: false,\n            message: `Upload failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n            insertedCount: 0\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVM7WUFDVEMsU0FBUyxDQUFDLGVBQWUsRUFBRW1CLGlCQUFpQkssUUFBUUwsTUFBTW5CLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQztZQUNyRkMsZUFBZTtRQUNqQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb2ktdXBsb2FkLXN5c3RlbS8uL2xpYi9zdXBhYmFzZS50cz9jOTlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcblxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhXG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSFcblxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXkpXG5cbmV4cG9ydCB0eXBlIFBsYXRmb3JtID0gJ21ldGEnIHwgJ2dvb2dsZScgfCAnc2hvcGlmeSdcblxuZXhwb3J0IGNvbnN0IFRBQkxFX05BTUVTOiBSZWNvcmQ8UGxhdGZvcm0sIHN0cmluZz4gPSB7XG4gIG1ldGE6ICdtZXRhX2ltcG9ydF9kYXRhJyxcbiAgZ29vZ2xlOiAnZ29vZ2xlX2ltcG9ydF9kYXRhJywgXG4gIHNob3BpZnk6ICdzaG9waWZ5X2ltcG9ydF9kYXRhJ1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBsb2FkQ1NWVG9TdXBhYmFzZShwbGF0Zm9ybTogUGxhdGZvcm0sIGZpbGU6IEZpbGUpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0ZXh0ID0gYXdhaXQgZmlsZS50ZXh0KClcbiAgICBjb25zdCBQYXBhID0gKGF3YWl0IGltcG9ydCgncGFwYXBhcnNlJykpLmRlZmF1bHRcbiAgICBcbiAgICBjb25zdCB7IGRhdGE6IHJvd3MsIGVycm9ycyB9ID0gUGFwYS5wYXJzZSh0ZXh0LCB7XG4gICAgICBoZWFkZXI6IHRydWUsXG4gICAgICBza2lwRW1wdHlMaW5lczogdHJ1ZSxcbiAgICAgIHRyYW5zZm9ybUhlYWRlcjogKGhlYWRlcjogc3RyaW5nKSA9PiBoZWFkZXIudHJpbSgpXG4gICAgfSlcblxuICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IGBDU1YgcGFyc2luZyBmYWlsZWQ6ICR7ZXJyb3JzWzBdLm1lc3NhZ2V9YCxcbiAgICAgICAgaW5zZXJ0ZWRDb3VudDogMFxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHRhYmxlTmFtZSA9IFRBQkxFX05BTUVTW3BsYXRmb3JtXVxuICAgIFxuICAgIC8vIFRyYW5zZm9ybSByb3dzIGZvciBkYXRhYmFzZSBpbnNlcnRpb25cbiAgICBjb25zdCB0cmFuc2Zvcm1lZFJvd3MgPSByb3dzLm1hcCgocm93OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkOiBhbnkgPSB7fVxuICAgICAgXG4gICAgICAvLyBQbGF0Zm9ybS1zcGVjaWZpYyB0cmFuc2Zvcm1hdGlvbnMgLSBNYXAgdG8gRVhBQ1QgZGF0YWJhc2UgY29sdW1uIG5hbWVzXG4gICAgICBpZiAocGxhdGZvcm0gPT09ICdnb29nbGUnKSB7XG4gICAgICAgIHRyYW5zZm9ybWVkLkRheSA9IHJvdy5EYXlcbiAgICAgICAgdHJhbnNmb3JtZWQuQ2FtcGFpZ24gPSByb3cuQ2FtcGFpZ25cbiAgICAgICAgdHJhbnNmb3JtZWRbJ0N1cnJlbmN5IGNvZGUnXSA9IHJvd1snQ3VycmVuY3kgY29kZSddIHx8ICdJTlInXG4gICAgICAgIHRyYW5zZm9ybWVkLkNvc3QgPSBwYXJzZUZsb2F0KHJvdy5Db3N0KSB8fCAwXG4gICAgICAgIHRyYW5zZm9ybWVkWydBdmcuIENQTSddID0gcGFyc2VGbG9hdChyb3dbJ0F2Zy4gQ1BNJ10pIHx8IDBcbiAgICAgICAgdHJhbnNmb3JtZWQuQ1RSID0gcGFyc2VGbG9hdChyb3cuQ1RSPy5yZXBsYWNlKCclJywgJycpKSB8fCAwXG4gICAgICB9IGVsc2UgaWYgKHBsYXRmb3JtID09PSAnbWV0YScpIHtcbiAgICAgICAgdHJhbnNmb3JtZWRbJ0NhbXBhaWduIG5hbWUnXSA9IHJvd1snQ2FtcGFpZ24gbmFtZSddXG4gICAgICAgIHRyYW5zZm9ybWVkWydBZCBzZXQgbmFtZSddID0gcm93WydBZCBzZXQgbmFtZSddXG4gICAgICAgIHRyYW5zZm9ybWVkWydBZCBuYW1lJ10gPSByb3dbJ0FkIG5hbWUnXVxuICAgICAgICB0cmFuc2Zvcm1lZC5EYXkgPSByb3cuRGF5XG4gICAgICAgIHRyYW5zZm9ybWVkWydBbW91bnQgc3BlbnQgKElOUiknXSA9IHBhcnNlRmxvYXQocm93WydBbW91bnQgc3BlbnQgKElOUiknXSkgfHwgMFxuICAgICAgICB0cmFuc2Zvcm1lZFsnQ1BNIChjb3N0IHBlciAxLDAwMCBpbXByZXNzaW9ucyknXSA9IHBhcnNlRmxvYXQocm93WydDUE0gKGNvc3QgcGVyIDEsMDAwIGltcHJlc3Npb25zKSddKSB8fCAwXG4gICAgICAgIHRyYW5zZm9ybWVkWydDVFIgKGxpbmsgY2xpY2stdGhyb3VnaCByYXRlKSddID0gcGFyc2VGbG9hdChyb3dbJ0NUUiAobGluayBjbGljay10aHJvdWdoIHJhdGUpJ10/LnJlcGxhY2UoJyUnLCAnJykpIHx8IDBcbiAgICAgIH0gZWxzZSBpZiAocGxhdGZvcm0gPT09ICdzaG9waWZ5Jykge1xuICAgICAgICB0cmFuc2Zvcm1lZC5EYXkgPSByb3cuRGF5XG4gICAgICAgIHRyYW5zZm9ybWVkWydVVE0gY2FtcGFpZ24nXSA9IHJvd1snVVRNIGNhbXBhaWduJ11cbiAgICAgICAgdHJhbnNmb3JtZWRbJ1VUTSB0ZXJtJ10gPSByb3dbJ1VUTSB0ZXJtJ11cbiAgICAgICAgdHJhbnNmb3JtZWRbJ1VUTSBjb250ZW50J10gPSByb3dbJ1VUTSBjb250ZW50J11cbiAgICAgICAgdHJhbnNmb3JtZWRbJ0xhbmRpbmcgcGFnZSBVUkwnXSA9IHJvd1snTGFuZGluZyBwYWdlIFVSTCddXG4gICAgICAgIHRyYW5zZm9ybWVkWydPbmxpbmUgc3RvcmUgdmlzaXRvcnMnXSA9IHBhcnNlSW50KHJvd1snT25saW5lIHN0b3JlIHZpc2l0b3JzJ10pIHx8IDBcbiAgICAgICAgdHJhbnNmb3JtZWRbJ1Nlc3Npb25zIHRoYXQgY29tcGxldGVkIGNoZWNrb3V0J10gPSBwYXJzZUludChyb3dbJ1Nlc3Npb25zIHRoYXQgY29tcGxldGVkIGNoZWNrb3V0J10pIHx8IDBcbiAgICAgICAgdHJhbnNmb3JtZWRbJ1Nlc3Npb25zIHRoYXQgcmVhY2hlZCBjaGVja291dCddID0gcGFyc2VJbnQocm93WydTZXNzaW9ucyB0aGF0IHJlYWNoZWQgY2hlY2tvdXQnXSkgfHwgMFxuICAgICAgICB0cmFuc2Zvcm1lZFsnU2Vzc2lvbnMgd2l0aCBjYXJ0IGFkZGl0aW9ucyddID0gcGFyc2VJbnQocm93WydTZXNzaW9ucyB3aXRoIGNhcnQgYWRkaXRpb25zJ10pIHx8IDBcbiAgICAgICAgdHJhbnNmb3JtZWRbJ0F2ZXJhZ2Ugc2Vzc2lvbiBkdXJhdGlvbiddID0gcGFyc2VGbG9hdChyb3dbJ0F2ZXJhZ2Ugc2Vzc2lvbiBkdXJhdGlvbiddKSB8fCAwXG4gICAgICAgIHRyYW5zZm9ybWVkLlBhZ2V2aWV3cyA9IHBhcnNlSW50KHJvdy5QYWdldmlld3MpIHx8IDBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkXG4gICAgfSlcblxuICAgIC8vIEluc2VydCBkYXRhIGluIGJhdGNoZXNcbiAgICBjb25zdCBCQVRDSF9TSVpFID0gNTAwXG4gICAgbGV0IGluc2VydGVkQ291bnQgPSAwXG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmFuc2Zvcm1lZFJvd3MubGVuZ3RoOyBpICs9IEJBVENIX1NJWkUpIHtcbiAgICAgIGNvbnN0IGJhdGNoID0gdHJhbnNmb3JtZWRSb3dzLnNsaWNlKGksIGkgKyBCQVRDSF9TSVpFKVxuICAgICAgXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSh0YWJsZU5hbWUpXG4gICAgICAgIC5pbnNlcnQoYmF0Y2gpXG4gICAgICAgIC5zZWxlY3QoKVxuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgQmF0Y2ggaW5zZXJ0IGVycm9yOmAsIGVycm9yKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IGBEYXRhYmFzZSBpbnNlcnQgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCxcbiAgICAgICAgICBpbnNlcnRlZENvdW50XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaW5zZXJ0ZWRDb3VudCArPSBiYXRjaC5sZW5ndGhcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6IGBTdWNjZXNzZnVsbHkgdXBsb2FkZWQgJHtpbnNlcnRlZENvdW50fSByb3dzYCxcbiAgICAgIGluc2VydGVkQ291bnQsXG4gICAgICBkYXRhOiB0cmFuc2Zvcm1lZFJvd3NcbiAgICB9XG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignVXBsb2FkIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IGBVcGxvYWQgZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsXG4gICAgICBpbnNlcnRlZENvdW50OiAwXG4gICAgfVxuICB9XG59Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwic3VwYWJhc2UiLCJUQUJMRV9OQU1FUyIsIm1ldGEiLCJnb29nbGUiLCJzaG9waWZ5IiwidXBsb2FkQ1NWVG9TdXBhYmFzZSIsInBsYXRmb3JtIiwiZmlsZSIsInRleHQiLCJQYXBhIiwiZGVmYXVsdCIsImRhdGEiLCJyb3dzIiwiZXJyb3JzIiwicGFyc2UiLCJoZWFkZXIiLCJza2lwRW1wdHlMaW5lcyIsInRyYW5zZm9ybUhlYWRlciIsInRyaW0iLCJsZW5ndGgiLCJzdWNjZXNzIiwibWVzc2FnZSIsImluc2VydGVkQ291bnQiLCJ0YWJsZU5hbWUiLCJ0cmFuc2Zvcm1lZFJvd3MiLCJtYXAiLCJyb3ciLCJ0cmFuc2Zvcm1lZCIsIkRheSIsIkNhbXBhaWduIiwiQ29zdCIsInBhcnNlRmxvYXQiLCJDVFIiLCJyZXBsYWNlIiwicGFyc2VJbnQiLCJQYWdldmlld3MiLCJCQVRDSF9TSVpFIiwiaSIsImJhdGNoIiwic2xpY2UiLCJlcnJvciIsImZyb20iLCJpbnNlcnQiLCJzZWxlY3QiLCJjb25zb2xlIiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/supabase.ts\n");

/***/ }),

/***/ "(api)/./pages/api/latest-data-date.js":
/*!***************************************!*\
  !*** ./pages/api/latest-data-date.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/supabase */ \"(api)/./lib/supabase.ts\");\n\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        console.log(\"Fetching latest data dates from all platforms...\");\n        const platforms = [\n            {\n                name: \"meta\",\n                table: \"meta_import_data\",\n                dateColumn: \"Day\"\n            },\n            {\n                name: \"google\",\n                table: \"google_import_data\",\n                dateColumn: \"Day\"\n            },\n            {\n                name: \"shopify\",\n                table: \"shopify_import_data\",\n                dateColumn: \"Day\"\n            }\n        ];\n        const platformDates = {};\n        const errors = [];\n        // Get latest date from each platform\n        for (const platform of platforms){\n            try {\n                console.log(`Querying latest date from ${platform.table}...`);\n                const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(platform.table).select(platform.dateColumn).order(platform.dateColumn, {\n                    ascending: false\n                }).limit(1);\n                if (error) {\n                    console.error(`Error querying ${platform.table}:`, error);\n                    errors.push(`${platform.name}: ${error.message}`);\n                    continue;\n                }\n                if (data && data.length > 0) {\n                    platformDates[platform.name] = data[0][platform.dateColumn];\n                    console.log(`${platform.name} latest date: ${platformDates[platform.name]}`);\n                } else {\n                    console.log(`No data found in ${platform.table}`);\n                    errors.push(`${platform.name}: No data found`);\n                }\n            } catch (platformError) {\n                console.error(`Error processing ${platform.name}:`, platformError);\n                errors.push(`${platform.name}: ${platformError.message}`);\n            }\n        }\n        // Check if we have data from any platforms\n        const validPlatformDates = Object.entries(platformDates).filter(([platform, date])=>date !== null && date !== undefined);\n        if (validPlatformDates.length === 0) {\n            return res.status(500).json({\n                error: \"No data available from any platform\",\n                details: errors,\n                platformDates\n            });\n        }\n        // Get unique dates from platforms that have data\n        const availableDates = validPlatformDates.map(([platform, date])=>date);\n        const uniqueDates = [\n            ...new Set(availableDates)\n        ];\n        if (uniqueDates.length > 1) {\n            console.error(\"Date mismatch across platforms with data:\", platformDates);\n            return res.status(400).json({\n                error: \"Data sync issue: Platforms with data have different latest dates\",\n                platformDates,\n                availableDates,\n                details: \"All platforms with data should have the same latest date. Please check data ingestion process.\"\n            });\n        }\n        const latestDate = uniqueDates[0];\n        const availablePlatforms = validPlatformDates.map(([platform, date])=>platform);\n        const missingPlatforms = platforms.map((p)=>p.name).filter((name)=>!platformDates[name]);\n        // Log warning if some platforms are missing data\n        if (missingPlatforms.length > 0) {\n            console.warn(`Warning: ${missingPlatforms.join(\", \")} platform(s) have no data for ${latestDate}`);\n        }\n        console.log(`All platforms synchronized with latest date: ${latestDate}`);\n        res.status(200).json({\n            success: true,\n            latestDate,\n            platformDates,\n            availablePlatforms,\n            missingPlatforms,\n            message: missingPlatforms.length > 0 ? `${availablePlatforms.length} platforms have data for ${latestDate}. Missing: ${missingPlatforms.join(\", \")}` : `All ${availablePlatforms.length} platforms have data for ${latestDate}`\n        });\n    } catch (error) {\n        console.error(\"Latest date fetch error:\", error);\n        res.status(500).json({\n            error: \"Failed to fetch latest data dates\",\n            details: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRSxPQUFPL0IsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsNEJBQTRCQTtRQUMxQ0osSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQkMsT0FBTztZQUNQMEIsU0FBUzFCLE1BQU1pQixPQUFPO1FBQ3hCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21vaS11cGxvYWQtc3lzdGVtLy4vcGFnZXMvYXBpL2xhdGVzdC1kYXRhLWRhdGUuanM/NGRjMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJy4uLy4uL2xpYi9zdXBhYmFzZSdcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSlcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIGxhdGVzdCBkYXRhIGRhdGVzIGZyb20gYWxsIHBsYXRmb3Jtcy4uLicpXG5cbiAgICBjb25zdCBwbGF0Zm9ybXMgPSBbXG4gICAgICB7IG5hbWU6ICdtZXRhJywgdGFibGU6ICdtZXRhX2ltcG9ydF9kYXRhJywgZGF0ZUNvbHVtbjogJ0RheScgfSxcbiAgICAgIHsgbmFtZTogJ2dvb2dsZScsIHRhYmxlOiAnZ29vZ2xlX2ltcG9ydF9kYXRhJywgZGF0ZUNvbHVtbjogJ0RheScgfSxcbiAgICAgIHsgbmFtZTogJ3Nob3BpZnknLCB0YWJsZTogJ3Nob3BpZnlfaW1wb3J0X2RhdGEnLCBkYXRlQ29sdW1uOiAnRGF5JyB9XG4gICAgXVxuXG4gICAgY29uc3QgcGxhdGZvcm1EYXRlcyA9IHt9XG4gICAgY29uc3QgZXJyb3JzID0gW11cblxuICAgIC8vIEdldCBsYXRlc3QgZGF0ZSBmcm9tIGVhY2ggcGxhdGZvcm1cbiAgICBmb3IgKGNvbnN0IHBsYXRmb3JtIG9mIHBsYXRmb3Jtcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coYFF1ZXJ5aW5nIGxhdGVzdCBkYXRlIGZyb20gJHtwbGF0Zm9ybS50YWJsZX0uLi5gKVxuXG4gICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20ocGxhdGZvcm0udGFibGUpXG4gICAgICAgICAgLnNlbGVjdChwbGF0Zm9ybS5kYXRlQ29sdW1uKVxuICAgICAgICAgIC5vcmRlcihwbGF0Zm9ybS5kYXRlQ29sdW1uLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAgICAgICAubGltaXQoMSlcblxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBxdWVyeWluZyAke3BsYXRmb3JtLnRhYmxlfTpgLCBlcnJvcilcbiAgICAgICAgICBlcnJvcnMucHVzaChgJHtwbGF0Zm9ybS5uYW1lfTogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHBsYXRmb3JtRGF0ZXNbcGxhdGZvcm0ubmFtZV0gPSBkYXRhWzBdW3BsYXRmb3JtLmRhdGVDb2x1bW5dXG4gICAgICAgICAgY29uc29sZS5sb2coYCR7cGxhdGZvcm0ubmFtZX0gbGF0ZXN0IGRhdGU6ICR7cGxhdGZvcm1EYXRlc1twbGF0Zm9ybS5uYW1lXX1gKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBObyBkYXRhIGZvdW5kIGluICR7cGxhdGZvcm0udGFibGV9YClcbiAgICAgICAgICBlcnJvcnMucHVzaChgJHtwbGF0Zm9ybS5uYW1lfTogTm8gZGF0YSBmb3VuZGApXG4gICAgICAgIH1cblxuICAgICAgfSBjYXRjaCAocGxhdGZvcm1FcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nICR7cGxhdGZvcm0ubmFtZX06YCwgcGxhdGZvcm1FcnJvcilcbiAgICAgICAgZXJyb3JzLnB1c2goYCR7cGxhdGZvcm0ubmFtZX06ICR7cGxhdGZvcm1FcnJvci5tZXNzYWdlfWApXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBkYXRhIGZyb20gYW55IHBsYXRmb3Jtc1xuICAgIGNvbnN0IHZhbGlkUGxhdGZvcm1EYXRlcyA9IE9iamVjdC5lbnRyaWVzKHBsYXRmb3JtRGF0ZXMpXG4gICAgICAuZmlsdGVyKChbcGxhdGZvcm0sIGRhdGVdKSA9PiBkYXRlICE9PSBudWxsICYmIGRhdGUgIT09IHVuZGVmaW5lZClcbiAgICBcbiAgICBpZiAodmFsaWRQbGF0Zm9ybURhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdObyBkYXRhIGF2YWlsYWJsZSBmcm9tIGFueSBwbGF0Zm9ybScsXG4gICAgICAgIGRldGFpbHM6IGVycm9ycyxcbiAgICAgICAgcGxhdGZvcm1EYXRlc1xuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBHZXQgdW5pcXVlIGRhdGVzIGZyb20gcGxhdGZvcm1zIHRoYXQgaGF2ZSBkYXRhXG4gICAgY29uc3QgYXZhaWxhYmxlRGF0ZXMgPSB2YWxpZFBsYXRmb3JtRGF0ZXMubWFwKChbcGxhdGZvcm0sIGRhdGVdKSA9PiBkYXRlKVxuICAgIGNvbnN0IHVuaXF1ZURhdGVzID0gWy4uLm5ldyBTZXQoYXZhaWxhYmxlRGF0ZXMpXVxuICAgIFxuICAgIGlmICh1bmlxdWVEYXRlcy5sZW5ndGggPiAxKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdEYXRlIG1pc21hdGNoIGFjcm9zcyBwbGF0Zm9ybXMgd2l0aCBkYXRhOicsIHBsYXRmb3JtRGF0ZXMpXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogJ0RhdGEgc3luYyBpc3N1ZTogUGxhdGZvcm1zIHdpdGggZGF0YSBoYXZlIGRpZmZlcmVudCBsYXRlc3QgZGF0ZXMnLFxuICAgICAgICBwbGF0Zm9ybURhdGVzLFxuICAgICAgICBhdmFpbGFibGVEYXRlcyxcbiAgICAgICAgZGV0YWlsczogJ0FsbCBwbGF0Zm9ybXMgd2l0aCBkYXRhIHNob3VsZCBoYXZlIHRoZSBzYW1lIGxhdGVzdCBkYXRlLiBQbGVhc2UgY2hlY2sgZGF0YSBpbmdlc3Rpb24gcHJvY2Vzcy4nXG4gICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IGxhdGVzdERhdGUgPSB1bmlxdWVEYXRlc1swXVxuICAgIGNvbnN0IGF2YWlsYWJsZVBsYXRmb3JtcyA9IHZhbGlkUGxhdGZvcm1EYXRlcy5tYXAoKFtwbGF0Zm9ybSwgZGF0ZV0pID0+IHBsYXRmb3JtKVxuICAgIGNvbnN0IG1pc3NpbmdQbGF0Zm9ybXMgPSBwbGF0Zm9ybXNcbiAgICAgIC5tYXAocCA9PiBwLm5hbWUpXG4gICAgICAuZmlsdGVyKG5hbWUgPT4gIXBsYXRmb3JtRGF0ZXNbbmFtZV0pXG5cbiAgICAvLyBMb2cgd2FybmluZyBpZiBzb21lIHBsYXRmb3JtcyBhcmUgbWlzc2luZyBkYXRhXG4gICAgaWYgKG1pc3NpbmdQbGF0Zm9ybXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS53YXJuKGBXYXJuaW5nOiAke21pc3NpbmdQbGF0Zm9ybXMuam9pbignLCAnKX0gcGxhdGZvcm0ocykgaGF2ZSBubyBkYXRhIGZvciAke2xhdGVzdERhdGV9YClcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhgQWxsIHBsYXRmb3JtcyBzeW5jaHJvbml6ZWQgd2l0aCBsYXRlc3QgZGF0ZTogJHtsYXRlc3REYXRlfWApXG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbGF0ZXN0RGF0ZSxcbiAgICAgIHBsYXRmb3JtRGF0ZXMsXG4gICAgICBhdmFpbGFibGVQbGF0Zm9ybXMsXG4gICAgICBtaXNzaW5nUGxhdGZvcm1zLFxuICAgICAgbWVzc2FnZTogbWlzc2luZ1BsYXRmb3Jtcy5sZW5ndGggPiAwIFxuICAgICAgICA/IGAke2F2YWlsYWJsZVBsYXRmb3Jtcy5sZW5ndGh9IHBsYXRmb3JtcyBoYXZlIGRhdGEgZm9yICR7bGF0ZXN0RGF0ZX0uIE1pc3Npbmc6ICR7bWlzc2luZ1BsYXRmb3Jtcy5qb2luKCcsICcpfWBcbiAgICAgICAgOiBgQWxsICR7YXZhaWxhYmxlUGxhdGZvcm1zLmxlbmd0aH0gcGxhdGZvcm1zIGhhdmUgZGF0YSBmb3IgJHtsYXRlc3REYXRlfWBcbiAgICB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignTGF0ZXN0IGRhdGUgZmV0Y2ggZXJyb3I6JywgZXJyb3IpXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggbGF0ZXN0IGRhdGEgZGF0ZXMnLFxuICAgICAgZGV0YWlsczogZXJyb3IubWVzc2FnZVxuICAgIH0pXG4gIH1cbn0iXSwibmFtZXMiOlsic3VwYWJhc2UiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInBsYXRmb3JtcyIsIm5hbWUiLCJ0YWJsZSIsImRhdGVDb2x1bW4iLCJwbGF0Zm9ybURhdGVzIiwiZXJyb3JzIiwicGxhdGZvcm0iLCJkYXRhIiwiZnJvbSIsInNlbGVjdCIsIm9yZGVyIiwiYXNjZW5kaW5nIiwibGltaXQiLCJwdXNoIiwibWVzc2FnZSIsImxlbmd0aCIsInBsYXRmb3JtRXJyb3IiLCJ2YWxpZFBsYXRmb3JtRGF0ZXMiLCJPYmplY3QiLCJlbnRyaWVzIiwiZmlsdGVyIiwiZGF0ZSIsInVuZGVmaW5lZCIsImRldGFpbHMiLCJhdmFpbGFibGVEYXRlcyIsIm1hcCIsInVuaXF1ZURhdGVzIiwiU2V0IiwibGF0ZXN0RGF0ZSIsImF2YWlsYWJsZVBsYXRmb3JtcyIsIm1pc3NpbmdQbGF0Zm9ybXMiLCJwIiwid2FybiIsImpvaW4iLCJzdWNjZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/latest-data-date.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Flatest-data-date&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Flatest-data-date.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();